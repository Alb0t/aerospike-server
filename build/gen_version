#!/bin/bash

EDITION=${1:-community}
BUILD_OS=${2:-unknown}
ARCH=${3:-unknown}
EE_SHA=$4
FEATURES=""
if [ $EDITION = enterprise -o $EDITION = federal ]; then
   FEATURES=";xdr"
fi

echo "////
//// AUTOMATICALLY GENERATED BY BUILD SYSTEM
////
const char aerospike_build_id[] = \"`git describe --abbrev=7`\";
const char aerospike_build_time[] = \"`date`\";
const char aerospike_build_type[] = \"Aerospike ${EDITION^} Edition\";
const char aerospike_build_os[] = \"${BUILD_OS}\";
const char aerospike_build_arch[] = \"${ARCH}\";
const char aerospike_build_sha[] = \"`git rev-parse HEAD`\";
const char aerospike_build_ee_sha[] = \"${EE_SHA}\";
const char aerospike_build_features[] = \"${FEATURES}\";
"
